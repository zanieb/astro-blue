---
/**
 * Custom PageTitle with breadcrumb - Mintlify/PYX style
 * Shows section identifier above the page title (like PYX docs)
 */

// Get route data from Starlight
const { entry, id } = Astro.locals.starlightRoute;
const title = entry?.data?.title || 'Untitled';

// Extract breadcrumb path from the id
const parts = (id || '').split('/');

// Build breadcrumb items with links
const breadcrumbItems = parts.slice(0, -1).map((part, index) => {
  const label = part.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
  const href = '/' + parts.slice(0, index + 1).join('/') + '/';
  return { label, href };
});

// Determine if this is the homepage (no breadcrumbs)
const isHomepage = breadcrumbItems.length === 0;
---

<div class="page-title-wrapper">
  {isHomepage ? (
    <div class="supertitle">Astro Blue</div>
  ) : (
    <nav class="breadcrumbs" aria-label="Breadcrumb">
      <ol>
        {breadcrumbItems.map((item, index) => (
          <li>
            <a href={item.href}>{item.label}</a>
            <span class="separator">&gt;</span>
          </li>
        ))}
      </ol>
    </nav>
  )}
  <h1 id="_top">{title}</h1>
  <div class="title-rule"></div>
</div>

<style>
  .page-title-wrapper {
    margin-bottom: 0.75rem;
  }

  .supertitle {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--sl-color-gray-3);
    margin-bottom: 0.25rem;
  }

  .breadcrumbs {
    margin-bottom: 0.25rem;
  }

  .breadcrumbs ol {
    display: flex;
    flex-wrap: nowrap;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 0;
    white-space: nowrap;
  }

  .breadcrumbs li {
    display: flex;
    align-items: center;
  }

  .breadcrumbs a {
    font-size: 0.875rem;
    font-weight: 400;
    color: var(--theme-text-muted);
    text-decoration: none;
  }

  .breadcrumbs a:hover {
    color: var(--theme-text);
    text-decoration: underline;
  }

  .breadcrumbs .separator {
    font-size: 0.75rem;
    color: var(--theme-text-subtle);
    margin: 0 0.5rem;
  }

  .breadcrumbs li:last-child .separator {
    display: none;
  }

  h1 {
    font-size: 2.25rem;
    font-weight: 600;
    line-height: 1.2;
    color: var(--sl-color-white);
    margin: 0;
    padding-bottom: 0;
  }

  .title-rule {
    display: none;
  }
</style>
