---
/**
 * Custom PageTitle with breadcrumb - Mintlify/PYX style
 * Shows section identifier above the page title (like PYX docs)
 */

// Get route data from Starlight
const { entry, slug } = Astro.locals.starlightRoute;
const title = entry?.data?.title || 'Untitled';

// Extract breadcrumb path from the slug
const parts = (slug || '').split('/');

// Build breadcrumb items with links
const breadcrumbItems = parts.slice(0, -1).map((part, index) => {
  const label = part.split('-').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');
  const href = '/' + parts.slice(0, index + 1).join('/') + '/';
  return { label, href };
});

// Determine the supertitle (section identifier like PYX style)
// For homepage (no breadcrumbs), show "Astro Blue"
// For other pages, show the first breadcrumb item (section name)
const isHomepage = breadcrumbItems.length === 0;
const supertitle = isHomepage ? 'Astro Blue' : breadcrumbItems[0]?.label;
---

<div class="page-title-wrapper">
  {supertitle && (
    <div class="supertitle">{supertitle}</div>
  )}
  <h1 id="_top">{title}</h1>
  <div class="title-rule"></div>
</div>

<style>
  .page-title-wrapper {
    margin-bottom: 1.5rem;
  }

  .supertitle {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--sl-color-gray-3);
    margin-bottom: 0.25rem;
  }

  h1 {
    font-size: 2.25rem;
    font-weight: 600;
    line-height: 1.2;
    color: var(--sl-color-white);
    margin: 0;
    padding-bottom: 1rem;
  }

  .title-rule {
    height: 1px;
    background: var(--sl-color-hairline-light);
    margin-top: 0;
  }
</style>
